---
title: "A Simple Start"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{A_Simple_Start}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# 1. Introduction:

`Coxtp` is an R package for fitting penalized Newton's method for the time-varying effects model using mAIC, TIC, GIC as information criteria, in particular we span the parameter using basis functions. Utilities for carrying out post-fitting visualization, summarize, and inference are also provided.


# 2. Installation:

```{r setup,include=TRUE}
library(surtvep)
```


# 3. Dataset preperation:


For the purpose of demonstration, we will use the simulated dataset "sim_data" in the our package. 

```{r}
sim_data=sim_data
```


Letâ€™s check the data first:

```{r}
head(sim_data)
```
Then, let's extract the time and event as vector, and get the remaining information in the dataset as matrix

```{r}

event=sim_data[,"event"]
time=sim_data[,"time"]
data=sim_data[,!colnames(sim_data) %in% c("event","time")]


```

# 4. Model fitting

## 4.1 Newton Method without penalization:

### 4.1.1 Simple fitting:

Let's fit the model. Here, the default method is Newton Method without penalization, with smooth-spline. Term `lambda_spline` refers to the smoothing parameter lambda(Detail could be found under both "Model parameter(Add link)" section or our paper here(add link). Default value is 0, which refers to no penalization. 

```{r}

fit <- coxtp(event = event, z = data, time = time)

```
To get the estimated time-varying effect of a specific coefficient, we could use the following plot function in our package:

```{r}
coxtp.plot(fit,coef="V1")
```

The plot shows the result of the time-varying effect of Variable "V1".


